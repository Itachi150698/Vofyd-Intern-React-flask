{% extends "base.html" %}

{% block content %} 


<h2>Login</h2>
    <form id="loginForm">
        <label>Email:</label>
        <input type="email" id="email" required><br>

        <label>Password:</label>
        <input type="password" id="password" required><br>

        <button type="submit">Login</button>
    </form>

    <a href="{{ url_for('views.signup_page') }}">Sign up here</a>



    <script>

    document.getElementById("loginForm").addEventListener("submit", async function (event) {
        event.preventDefault(); // Prevent default form submission
    
        const formData = {
            email: document.getElementById("email").value,
            password: document.getElementById("password").value
        };
    
        try {
            const response = await fetch("/auth/login", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(formData)
            });
    
            const result = await response.json();
            alert(result.message); // Show success or error message
    
            if (response.status === 200) {
                window.location.href = "/views/dashboard"; // Redirect to dashboard on success
            }
        } catch (error) {
            console.error("Error:", error);
        }
    });
    
</script>
{% endblock %}